---
date: 2024-12-23
author: 学生
summary: E6（Feature Matching）结果整理与 E7（Perceptual Loss）50 epoch 训练分析，对比 GAN 增强不同感知损失的效果
---

## 1. 今日工作概览（2024-12-23）

- 收集了 Kaggle 导出的 **E6 结果（仅图与图表）** 与 **E7 完整结果**，确认本地目录：`outputs/e6_results_images_only/` 与 `outputs/e7_results/`。
- 基于 `history_pix2pix_perc.json` 计算了 **E7（L1+GAN+Perceptual）50 epoch** 的最佳与最终指标，评估训练稳定性与过拟合情况。
- 将 **E6（Feature Matching）vs E7（Perceptual）** 的关键指标做简要对比，给出后续建议（早停点与超参方向）。

---

## 2. 实验 E7：Pix2Pix（L1 + GAN + Perceptual）50 epoch

### 2.1 配置概览（见 `outputs/e7_results/config.json`）

```2:17:outputs/e7_results/config.json
{
  "exp_name": "pix2pix_l1_gan_perc_strong_e50",
  "epochs": 50,
  "batch_size": 1,
  "lr": 0.0002,
  "start_decay_epoch": 25,
  "lambda_l1": 100.0,
  "lambda_perc": 0.1,
  "aug_mode": "strong",
  "save_interval": 10,
  "device": "cuda"
}
```

### 2.2 关键指标（基于 `history_pix2pix_perc.json`，50 epoch）

- 最佳（按最小 Val L1）：**epoch 26，Val L1/MAE 0.1111，PSNR 16.21 dB，SSIM 0.447**
- 最佳 PSNR：**epoch 33，16.34 dB**（此时 Val L1 0.1117，SSIM 0.428）
- 最终（epoch 50）：Val L1/MAE 0.1154，PSNR 16.01 dB，SSIM 0.419
- 走势：训练损失稳定下降；验证 L1/PSNR/SSIM 在 20–35 epoch 达到高点，35 之后轻微回落，说明存在**轻度过拟合**但幅度小于 E6。

### 2.3 现象解读

- **感知损失加入后**（λ_perc=0.1），模型在 25–35 epoch 获得最优结构与像素平衡；后期回落主要体现在 L1/SSIM 小幅下降。
- 判别器损失持续下降，未出现震荡失衡；生成器各分量（GAN/L1/Perceptual）保持平稳，训练动态健康。
- **早停建议**：可在 Val L1 高点附近（~epoch 26–33）停止，以避免后期小幅退化。

---

## 3. E6（Feature Matching）与 E7（Perceptual）对比要点

| 模型 | 选取策略 | Epoch | Val L1/MAE ↓ | PSNR ↑ | SSIM ↑ | 观察 |
|------|----------|-------|--------------|--------|--------|------|
| E6: L1+GAN+FM (λ_FM=10) | 最佳 | 31 | 0.1119 | 16.132 | 0.441 | 最优 SSIM 略高于 E2，但 PSNR/L1 稍差，后期过拟合明显 |
| E6: L1+GAN+FM | 最后 | 50 | 0.1224 | 15.658 | 0.396 | 过拟合严重，指标明显退化 |
| E7: L1+GAN+Perc (λ_perc=0.1) | 最佳（Val L1） | 26 | 0.1111 | 16.21 | 0.447 | SSIM/PSNR/L1 全面优于 E6 最佳值，且更平衡 |
| E7: L1+GAN+Perc | 最后 | 50 | 0.1154 | 16.01 | 0.419 | 尾段轻微退化，但仍显著好于 E6 尾段 |

**结论**：
- 在相同 50 epoch、strong 增强下，**Perceptual Loss (E7) 在 SSIM、PSNR、L1 上整体优于 Feature Matching (E6)**，且后期退化幅度更小，训练更稳。
- E6 的 λ_FM=10 可能偏大导致后期过拟合；E7 的 λ_perc=0.1 在本次设置下较为稳健。

---

## 4. 后续建议

- 若继续优化 E7：考虑在 epoch 26–33 采用早停或更早的学习率衰减，避免尾段回落。
- 若重试 E6：将 λ_FM 下调到 1–5，并配合早停（30 epoch 左右）验证是否能兼顾 SSIM 提升与收敛稳定。
- 报告整理：可将 E2/E6/E7 的主结果汇总到“感知损失对比”小节，突出 Perceptual Loss 的稳定收益与 E6 的过拟合风险。

---

## 5. 文件记录

- E6 图与图表（无 checkpoint）：`outputs/e6_results_images_only/`
- E7 完整结果（含 history/config/图表与样例图）：`outputs/e7_results/`


